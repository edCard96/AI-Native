<!DOCTYPE html>
<html>
  <head>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="" />
    <link
      rel=stylesheet"
      as="style"
      onload="this.rel='stylesheet'"
      href="https://fonts.googleapis.com/css2?display=swap&amp;family=Noto+Sans%3Awght%40400%3B5000%3B900mp;family=Plus+Jakarta+Sans%3Awght%40400%3B50003800    />

    <title>InkWize - Login</title>
    <link rel=icon" type="image/x-iconhref=data:image/x-icon;base64," />

    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  </head>
  <body>
    <div class="relative flex size-full min-h-screen flex-col bg-[#fcf8f8] group/design-root overflow-x-hidden" style='font-family: Plus Jakarta Sans",Noto Sans", sans-serif;'>
      <div class="layout-container flex h-full grow flex-col>     <header class=flex items-center justify-between whitespace-nowrap border-b border-solid border-b-#f3e7000000000py-3        <div class=flex items-center gap-8>
            <div class=flex items-center gap-4 text-[#1b0e0e]>              <div class="size-4>
                <svg viewBox=0 0 48 fill=none" xmlns=http://www.w3.org/2000/svg><path d="M4 417.333417.3334306666V30.666644V4Z" fill="currentColor"></path></svg>
              </div>
              <h2 class="text-[#1b0 text-lg font-bold leading-tight tracking-[0.015em]">InkWize</h2>
            </div>
            <div class=flex items-center gap-9>
              <a class="text-[#1b0ext-sm font-medium leading-normal" href="InkWize.html">Home</a>
              <a class="text-[#1b0ext-sm font-medium leading-normal" href="InkWize.html">Explore</a>
              <a class="text-[#1b0ext-sm font-medium leading-normal" href="InkWize.html">My Library</a>
            </div>
          </div>
        </header>
        
        <div class="flex flex-1 justify-center items-center py-10        <div class="w-full max-w-md">
            <!-- Login Form -->
            <div id=login-form" class="bg-white rounded-lg shadow-lg p-8 border border-[#f3e7e8>              <div class="text-center mb-8>
                <h2 class="text-[#1b0e0e] text-2xl font-bold leading-tight tracking-[-0.015mb-2>Welcome Back</h2
                <p class="text-[#994d51t-base font-normal leading-normal">Sign in to your InkWize account</p>
              </div>
              
              <form id="loginForm class="space-y-6>
                <div>
                  <label for=loginEmail" class=block text-[#1b0ext-sm font-medium mb-2
                  <input
                    type="email"
                    id="loginEmail"
                    name="email"
                    required
                    class="w-full px-4 py-3 border border-[#f3e7e8] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#e92932focus:border-transparent text-[#1b0e0 placeholder-[#994d51]"
                    placeholder="Enter your email"
                  />
                </div>
                
                <div>
                  <label for="loginPassword" class=block text-[#1b0ext-sm font-medium mb-2>Password</label>
                  <input
                    type="password"
                    id="loginPassword"
                    name="password"
                    required
                    class="w-full px-4 py-3 border border-[#f3e7e8] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#e92932focus:border-transparent text-[#1b0e0 placeholder-[#994d51]"
                    placeholder="Enter your password"
                  />
                </div>
                
                <div class=flex items-center justify-between">
                  <label class=flex items-center">
                    <input type=checkbox" class=rounded border-[#f37e8] text-[#e92932 focus:ring-[#e92932]" />
                    <span class=ml-2 text-[#1b0e0e] text-sm">Remember me</span>
                  </label>
                </div>
                
                <button
                  type="submit"
                  class="w-full bg-[#e92932text-white py-3-4unded-lg font-bold text-base hover:bg-[#d4242 transition-colors duration-200                >
                  Sign In
                </button>
                
                <div class="text-center">
                  <p class="text-[#994                   Dont have an account? 
                    <button type=button" onclick="showRegisterForm()" class="text-[#e92932 font-medium hover:underline">Sign up</button>
                  </p>
                </div>
              </form>
              
              <div id=loginError class="hidden mt-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg"></div>
            </div>
            
            <!-- Register Form -->
            <div id="register-form class="hidden bg-white rounded-lg shadow-lg p-8 border border-[#f3e7e8>              <div class="text-center mb-8>
                <h2 class="text-[#1b0e0e] text-2xl font-bold leading-tight tracking-[-0.015-2>Create Account</h2
                <p class="text-[#994d51t-base font-normal leading-normal>Join InkWize and start your comic journey</p>
              </div>
              
              <form id="registerForm class="space-y-6>
                <div>
                  <label for="registerName" class=block text-[#1b0ext-sm font-medium mb-2>Full Name</label>
                  <input
                    type="text"
                    id="registerName"
                    name="name"
                    required
                    class="w-full px-4 py-3 border border-[#f3e7e8] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#e92932focus:border-transparent text-[#1b0e0 placeholder-[#994d51]"
                    placeholder="Enter your full name"
                  />
                </div>
                
                <div>
                  <label for="registerEmail" class=block text-[#1b0ext-sm font-medium mb-2
                  <input
                    type="email"
                    id="registerEmail"
                    name="email"
                    required
                    class="w-full px-4 py-3 border border-[#f3e7e8] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#e92932focus:border-transparent text-[#1b0e0 placeholder-[#994d51]"
                    placeholder="Enter your email"
                  />
                </div>
                
                <div>
                  <label for=registerPassword" class=block text-[#1b0ext-sm font-medium mb-2>Password</label>
                  <input
                    type="password"
                    id="registerPassword"
                    name="password"
                    required
                    minlength="6"
                    class="w-full px-4 py-3 border border-[#f3e7e8] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#e92932focus:border-transparent text-[#1b0e0 placeholder-[#994d51]"
                    placeholder=Create a password (min 6 characters)"
                  />
                </div>
                
                <div>
                  <label for="confirmPassword" class=block text-[#1b0ext-sm font-medium mb-2>Confirm Password</label>
                  <input
                    type="password"
                    id=confirmPassword                   name=confirmPassword                   required
                    class="w-full px-4 py-3 border border-[#f3e7e8] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#e92932focus:border-transparent text-[#1b0e0 placeholder-[#994d51]"
                    placeholder="Confirm your password"
                  />
                </div>
                
                <button
                  type="submit"
                  class="w-full bg-[#e92932text-white py-3-4unded-lg font-bold text-base hover:bg-[#d4242 transition-colors duration-200                >
                  Create Account
                </button>
                
                <div class="text-center">
                  <p class="text-[#994                   Already have an account? 
                    <button type=button" onclick="showLoginForm()" class="text-[#e92932 font-medium hover:underline">Sign in</button>
                  </p>
                </div>
              </form>
              
              <div id="registerError class="hidden mt-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <script>
      function showRegisterForm() {
        document.getElementById('login-form').classList.add('hidden');
        document.getElementById('register-form').classList.remove('hidden');
        document.getElementById('loginError').classList.add('hidden');
      }
      
      function showLoginForm() {
        document.getElementById('register-form').classList.add('hidden');
        document.getElementById('login-form').classList.remove('hidden');
        document.getElementById('registerError').classList.add('hidden');
      }
      
      // Handle login form submission
      document.getElementById('loginForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const email = document.getElementById('loginEmail').value;
        const password = document.getElementById('loginPassword').value;
        const errorDiv = document.getElementById('loginError');
        
        try {
          const response = await fetch('/api/auth/login', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({ email, password }),
          });
          
          const data = await response.json();
          
          if (response.ok) {
            // Store the token
            localStorage.setItem('inkwize_token', data.token);
            localStorage.setItem('inkwize_user', JSON.stringify(data.user));
            
            // Redirect to profile page
            window.location.href = 'InkWize_Profile.html';
          } else {
            errorDiv.textContent = data.error || 'Login failed';
            errorDiv.classList.remove('hidden');
          }
        } catch (error) {
          errorDiv.textContent = 'Network error. Please try again.';
          errorDiv.classList.remove('hidden');
        }
      });
      
      // Handle register form submission
      document.getElementById('registerForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const name = document.getElementById('registerName').value;
        const email = document.getElementById('registerEmail').value;
        const password = document.getElementById('registerPassword').value;
        const confirmPassword = document.getElementById('confirmPassword').value;
        const errorDiv = document.getElementById('registerError');
        
        if (password !== confirmPassword) {
          errorDiv.textContent = 'Passwords do not match';
          errorDiv.classList.remove('hidden');
          return;
        }
        
        try {
          const response = await fetch('/api/auth/register', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({ name, email, password }),
          });
          
          const data = await response.json();
          
          if (response.ok) {
            // Store the token
            localStorage.setItem('inkwize_token', data.token);
            localStorage.setItem('inkwize_user', JSON.stringify(data.user));
            
            // Redirect to profile page
            window.location.href = 'InkWize_Profile.html';
          } else {
            errorDiv.textContent = data.error || 'Registration failed';
            errorDiv.classList.remove('hidden');
          }
        } catch (error) {
          errorDiv.textContent = 'Network error. Please try again.';
          errorDiv.classList.remove('hidden');
        }
      });
      
      // Check if user is already logged in
      document.addEventListener('DOMContentLoaded', () => {
        const token = localStorage.getItem('inkwize_token');
        if (token) {
          window.location.href = 'InkWize_Profile.html';
        }
      });
    </script>
  </body>
</html> 